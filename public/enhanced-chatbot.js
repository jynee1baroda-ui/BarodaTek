// ULTRA-ENHANCED AI CHATBOT - Full Intelligence System
// Features: Demo assistance, code generation, knowledge updates, logical reasoning

class EnhancedChatbot {
    constructor() {
        this.conversationHistory = [];
        this.knowledgeBase = this.initializeKnowledgeBase();
        this.maxHistoryLength = 20;
    }

    initializeKnowledgeBase() {
        return {
            games: {
                'api-quiz': { name: 'API Galaxy Quiz', questions: 8, topics: ['HTTP methods', 'status codes', 'REST', 'JSON'] },
                'debug-game': { name: 'Debug Detective', questions: 5, topics: ['syntax errors', 'logic bugs', 'common mistakes'] },
                'syntax-game': { name: 'Syntax Speed Run', questions: 5, topics: ['JavaScript keywords', 'operators', 'syntax patterns'] }
            },
            codeTemplates: {
                apiRequest: {
                    javascript: `fetch('https://api.example.com/data')
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Error:', error));`,
                    python: `import requests
response = requests.get('https://api.example.com/data')
data = response.json()
print(data)`
                },
                expressServer: `const express = require('express');
const app = express();
app.use(express.json());

app.get('/api/data', (req, res) => {
    res.json({ message: 'Success!' });
});

app.listen(3000, () => console.log('Server running'));`,
                validation: `function validateEmail(email) {
    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);
}

function validateForm(data) {
    const errors = {};
    if (!data.name || data.name.length < 2) {
        errors.name = 'Name too short';
    }
    if (!validateEmail(data.email)) {
        errors.email = 'Invalid email';
    }
    return { isValid: Object.keys(errors).length === 0, errors };
}`
            }
        };
    }

    async processMessage(userMessage) {
        this.conversationHistory.push({ role: 'user', content: userMessage, time: new Date() });
        
        if (this.conversationHistory.length > this.maxHistoryLength) {
            this.conversationHistory = this.conversationHistory.slice(-this.maxHistoryLength);
        }

        const intent = this.analyzeIntent(userMessage);
        const entities = this.extractEntities(userMessage);
        const response = await this.generateResponse(userMessage, intent, entities);

        this.conversationHistory.push({ role: 'assistant', content: response, time: new Date() });
        return response;
    }

    analyzeIntent(message) {
        const msg = message.toLowerCase();
        
        if (msg.match(/show|demo|explain|what (is|are)|how (do|does)|tell me about/)) {
            if (msg.includes('game')) return 'demo_game';
            if (msg.includes('tool')) return 'demo_tool';
            return 'explain';
        }
        if (msg.match(/generate|create|write|build|make|code for/)) return 'generate_code';
        if (msg.match(/game|play|quiz|hint|answer/)) return 'game_help';
        if (msg.match(/code|program|javascript|python/)) return 'coding_help';
        if (msg.match(/api|rest|endpoint|http/)) return 'api_help';
        if (msg.match(/error|bug|fix|debug/)) return 'debug_help';
        if (msg.match(/learn|teach|tutorial/)) return 'learning';
        if (msg.match(/price|cost|service/)) return 'pricing';
        if (msg.match(/hello|hi|hey|thanks/)) return 'greeting';
        
        return 'general';
    }

    extractEntities(message) {
        const msg = message.toLowerCase();
        return {
            game: msg.includes('api quiz') ? 'api-quiz' : msg.includes('debug') ? 'debug-game' : msg.includes('syntax') ? 'syntax-game' : null,
            language: msg.includes('javascript') || msg.includes('js') ? 'javascript' : msg.includes('python') ? 'python' : null,
            httpMethod: msg.match(/\b(get|post|put|delete)\b/i)?.[1]?.toUpperCase() || null,
            tool: msg.includes('explorer') ? 'api-explorer' : msg.includes('analytics') ? 'analytics' : null
        };
    }

    async generateResponse(message, intent, entities) {
        switch (intent) {
            case 'demo_game': return this.explainGame(entities.game, message);
            case 'demo_tool': return this.explainTool(entities.tool, message);
            case 'generate_code': return this.generateCode(message, entities);
            case 'game_help': return this.getGameHelp(entities.game, message);
            case 'coding_help': return this.getCodingHelp(message, entities);
            case 'api_help': return this.getAPIHelp(message, entities);
            case 'debug_help': return this.getDebugHelp(message);
            case 'learning': return this.getLearningHelp(message);
            case 'pricing': return this.getPricingInfo();
            case 'greeting': return this.getGreeting();
            default: return this.getGeneralHelp(message);
        }
    }

    explainGame(gameName, message) {
        if (!gameName) {
            return `üéÆ **BARODATEK GAMES**\n\n**Three Interactive Games:**\n\n1Ô∏è‚É£ **API Galaxy Quiz** üåå\n- 8 questions about APIs, HTTP, REST, JSON\n- Hints available (-20pts each)\n- Answer reveals with explanations\n- Grading: S (100%) to D (<60%)\n\n2Ô∏è‚É£ **Debug Detective** üêõ\n- Find bugs in code snippets\n- 5 debugging challenges\n- Real-world scenarios\n- Learn common mistakes\n\n3Ô∏è‚É£ **Syntax Speed Run** ‚ö°\n- Complete JavaScript syntax\n- 5 fill-in-the-blank questions\n- Test keyword knowledge\n- Quick learning\n\n**How to Play:**\n‚úÖ Click "LAUNCH GAME" in Arena 1\n‚úÖ Game opens in modal\n‚úÖ Use buttons: üí° Hint | üëÅÔ∏è Reveal | ‚è≠Ô∏è Skip\n‚úÖ Get graded at end!\n\n**Visual Feedback:**\n‚Ä¢ ‚úÖ Green = Correct\n‚Ä¢ ‚ùå Red = Wrong (correct shown in green)\n‚Ä¢ üéâ Confetti for correct answers!\n\nReady to play? Click any "LAUNCH GAME" button! üöÄ`;
        }

        const game = this.knowledgeBase.games[gameName];
        return `üéÆ **${game.name}** - Full Demo Guide\n\n**Overview:**\n${game.questions} interactive questions covering ${game.topics.join(', ')}\n\n**Features:**\n‚Ä¢ üí° Hint Button: Get helpful hint (-20 points)\n‚Ä¢ üëÅÔ∏è Reveal Answer: See correct answer + explanation (no points, skip question)\n‚Ä¢ ‚è≠Ô∏è Skip: Move to next question\n‚Ä¢ ‚úÖ/‚ùå Visual feedback (green/red highlights)\n‚Ä¢ üìä Real-time score tracking\n‚Ä¢ üéâ Celebration animations\n\n**Grading System:**\n‚Ä¢ S = 100% Perfect!\n‚Ä¢ A+ = 90-99% Outstanding!\n‚Ä¢ A = 80-89% Excellent!\n‚Ä¢ B = 70-79% Good!\n‚Ä¢ C = 60-69% Keep practicing!\n‚Ä¢ D = <60% Try again!\n\n**How to Play:**\n1. Click "LAUNCH GAME" in Arena 1\n2. Read question carefully\n3. Choose answer (A, B, C, D)\n4. Use hint if stuck (lightbulb icon)\n5. See explanation after answering\n6. Get final grade!\n\n**Pro Tips:**\n‚Ä¢ Try without hints first (more points!)\n‚Ä¢ Read explanations to learn\n‚Ä¢ Replay to beat your score\n‚Ä¢ Use skip if completely stuck\n\n**Where to Start:**\nClick "LAUNCH GAME" for ${game.name} in the games section! üéØ`;
    }

    explainTool(toolName, message) {
        const tools = {
            'api-explorer': `üîç **API Explorer Demo**\n\n**What It Does:**\nTest API endpoints in real-time without writing code!\n\n**Features:**\n‚Ä¢ Enter any API URL\n‚Ä¢ Choose HTTP method (GET, POST, PUT, DELETE)\n‚Ä¢ Add custom headers\n‚Ä¢ Send JSON body\n‚Ä¢ View formatted response\n‚Ä¢ See status codes\n‚Ä¢ Copy response data\n\n**How to Use:**\n1. Click "OPEN EXPLORER" in Arena 2\n2. Enter API URL (e.g., https://api.example.com/users)\n3. Select method (GET, POST, etc.)\n4. Add headers if needed\n5. Add body for POST/PUT\n6. Click "Send Request"\n7. View response!\n\n**Example:**\nURL: https://jsonplaceholder.typicode.com/users\nMethod: GET\nClick Send ‚Üí See user list!\n\n**Perfect For:**\n‚Ä¢ Testing APIs before coding\n‚Ä¢ Debugging API issues\n‚Ä¢ Learning HTTP methods\n‚Ä¢ Exploring public APIs\n\nTry it now in Arena 2! üöÄ`,
            'analytics': `üìä **Lightweight Analytics Demo**\n\n**What It Does:**\nPrivacy-first visitor tracking with beautiful charts!\n\n**Features:**\n‚Ä¢ Real-time visitor count\n‚Ä¢ Page view tracking\n‚Ä¢ Click event monitoring\n‚Ä¢ Time on site\n‚Ä¢ Chart.js visualizations\n‚Ä¢ CSV/JSON export\n‚Ä¢ 100% privacy (no external tracking!)\n\n**How to Use:**\n1. Click "VIEW ANALYTICS" in Arena 2\n2. See live dashboard\n3. View charts updating in real-time\n4. Export data as CSV or JSON\n5. No setup needed!\n\n**Data Tracked:**\n‚Ä¢ Visitors (session-based)\n‚Ä¢ Page views\n‚Ä¢ Button/link clicks\n‚Ä¢ Time spent on site\n‚Ä¢ Traffic sources\n\n**Privacy First:**\n‚úÖ All data stored in browser (LocalStorage)\n‚úÖ No cookies\n‚úÖ No external servers\n‚úÖ 100% private\n\n**Export Options:**\n‚Ä¢ CSV for Excel/Google Sheets\n‚Ä¢ JSON for programming\n\nView your analytics now in Arena 2! üìà`
        };

        return tools[toolName] || `üîß **Tool Demo**\n\nAvailable tools:\n‚Ä¢ API Explorer (test endpoints)\n‚Ä¢ Lightweight Analytics (track visitors)\n‚Ä¢ Pro Services (6 demos)\n\nWhich tool do you want to learn about? üöÄ`;
    }

    generateCode(message, entities) {
        const msg = message.toLowerCase();
        
        if (msg.includes('api') || msg.includes('request') || msg.includes('fetch')) {
            const lang = entities.language || 'javascript';
            const method = entities.httpMethod || 'GET';
            
            if (lang === 'javascript') {
                if (msg.includes('express') || msg.includes('server')) {
                    return `üîß **Express Server Code:**\n\n\`\`\`javascript\nconst express = require('express');\nconst cors = require('cors');\nconst app = express();\n\napp.use(cors());\napp.use(express.json());\n\napp.${method.toLowerCase()}('/api/data', async (req, res) => {\n    try {\n        ${method === 'GET' ? '// Fetch from database\n        const data = await fetchData();' : '// Process request body\n        const data = req.body;'}\n        \n        res.status(${method === 'POST' ? '201' : '200'}).json({\n            success: true,\n            data: data\n        });\n    } catch (error) {\n        res.status(500).json({ error: error.message });\n    }\n});\n\napp.listen(3000, () => {\n    console.log('Server running on port 3000');\n});\n\`\`\`\n\n**To use:**\n1. npm install express cors\n2. Save as server.js\n3. node server.js\n4. Test: http://localhost:3000/api/data\n\nNeed ${method} client code too? Just ask! üöÄ`;
                } else {
                    return `üîß **JavaScript ${method} Request:**\n\n\`\`\`javascript\nasync function ${method.toLowerCase()}Data(url${method !== 'GET' ? ', data' : ''}) {\n    try {\n        const options = {\n            method: '${method}',\n            headers: { 'Content-Type': 'application/json' }${method !== 'GET' ? ',\n            body: JSON.stringify(data)' : ''}\n        };\n        \n        const response = await fetch(url, options);\n        \n        if (!response.ok) {\n            throw new Error(\`HTTP \${response.status}\`);\n        }\n        \n        const result = await response.json();\n        console.log('Success:', result);\n        return result;\n    } catch (error) {\n        console.error('Error:', error);\n        throw error;\n    }\n}\n\n// Usage:\n${method === 'GET' ? "getData('https://api.example.com/data');" : "postData('https://api.example.com/data', { key: 'value' });"}\n\`\`\`\n\n**Features:**\n‚úÖ Async/await\n‚úÖ Error handling\n‚úÖ Status checking\n‚úÖ JSON parsing\n\nCopy and use this code! üöÄ`;
                }
            } else if (lang === 'python') {
                return `üêç **Python ${method} Request:**\n\n\`\`\`python\nimport requests\nimport json\n\ndef ${method.toLowerCase()}_data(url${method !== 'GET' ? ', data=None' : ''}):\n    headers = {'Content-Type': 'application/json'}\n    \n    try:\n        response = requests.${method.toLowerCase()}(\n            url${method !== 'GET' ? ',\n            json=data' : ''},\n            headers=headers\n        )\n        response.raise_for_status()\n        result = response.json()\n        print(f'Success: {result}')\n        return result\n    except requests.exceptions.RequestException as e:\n        print(f'Error: {e}')\n        raise\n\n# Usage:\n${method === 'GET' ? "get_data('https://api.example.com/data')" : "post_data('https://api.example.com/data', {'key': 'value'})"}\n\`\`\`\n\n**To use:**\n1. pip install requests\n2. Run script\n3. Check output\n\nNeed Flask server code? Ask me! üöÄ`;
            }
        }

        if (msg.includes('validate') || msg.includes('validation')) {
            return `üîß **Validation Code:**\n\n\`\`\`javascript\n${this.knowledgeBase.codeTemplates.validation}\n\n// Usage:\nconst result = validateForm({\n    name: 'John',\n    email: 'john@example.com'\n});\n\nif (result.isValid) {\n    console.log('Valid!');\n} else {\n    console.log('Errors:', result.errors);\n}\n\`\`\`\n\n**Features:**\n‚úÖ Email validation\n‚úÖ Name length check\n‚úÖ Returns errors object\n‚úÖ Easy to extend\n\nCopy and customize! üöÄ`;
        }

        if (msg.includes('function') || msg.includes('class')) {
            return `üíª **Code Generation Available:**\n\n**I can generate:**\n\n**API Code:**\n‚Ä¢ "generate GET request code"\n‚Ä¢ "create Express server"\n‚Ä¢ "make POST request in Python"\n\n**Functions:**\n‚Ä¢ "generate validation function"\n‚Ä¢ "create sort function"\n‚Ä¢ "make authentication function"\n\n**Classes:**\n‚Ä¢ "create API client class"\n‚Ä¢ "generate user model"\n\n**Just describe what you need!**\n\nExamples:\n‚Ä¢ "generate code to fetch user data"\n‚Ä¢ "create function to validate email"\n‚Ä¢ "make Express route for users"\n\nWhat code do you need? üöÄ`;
        }

        return `üíª **Code Generation:**\n\nI can generate:\n‚úÖ API requests (fetch, axios)\n‚úÖ Express servers\n‚úÖ Validation functions\n‚úÖ Classes and models\n‚úÖ Error handlers\n‚úÖ Database queries\n\n**Languages:** JavaScript, Python\n\n**Just tell me:**\n‚Ä¢ What you want to build\n‚Ä¢ Which language\n‚Ä¢ Any specific requirements\n\n**Example:** "generate POST request in JavaScript"\n\nWhat code do you need? üöÄ`;
    }

    getGameHelp(gameName, message) {
        if (!gameName) {
            return `üéÆ **Game Help**\n\n**Can't see hint/answer buttons?**\n\n‚úÖ **Look for these buttons below each question:**\n‚Ä¢ üí° Show Hint (-20 pts)\n‚Ä¢ üëÅÔ∏è Reveal Answer (Skip)\n‚Ä¢ ‚è≠Ô∏è Skip Question\n\n**Not showing?**\n1. Make sure game is loaded (click LAUNCH GAME)\n2. Scroll down below the answer options\n3. Buttons appear after question loads\n4. Try refreshing if still missing\n\n**How hints work:**\n1. Click üí° lightbulb button\n2. Hint appears in yellow box\n3. Lose 20 points (one-time)\n4. Button becomes disabled\n\n**How answer reveal works:**\n1. Click üëÅÔ∏è eye button\n2. Correct answer highlights green\n3. Explanation shows below\n4. Auto-advances in 4 seconds\n\n**Visual feedback:**\n‚Ä¢ ‚úÖ Green = Correct answer\n‚Ä¢ ‚ùå Red = Your wrong answer\n‚Ä¢ Correct answer always shows in green\n\n**Still having issues?**\nTell me:\n‚Ä¢ Which game?\n‚Ä¢ What's not working?\n‚Ä¢ Any error messages?\n\nI'll help you fix it! üöÄ`;
        }

        const game = this.knowledgeBase.games[gameName];
        return `üéÆ **${game.name} - Help**\n\n**Button Locations:**\nAfter each question loads, scroll down to see:\n‚Ä¢ üí° Show Hint (yellow button)\n‚Ä¢ üëÅÔ∏è Reveal Answer (blue button)\n‚Ä¢ ‚è≠Ô∏è Skip (gray button)\n\n**Hint System:**\n‚Ä¢ Click lightbulb icon üí°\n‚Ä¢ Get helpful hint\n‚Ä¢ Costs 20 points\n‚Ä¢ Can only use once per question\n‚Ä¢ Shows in yellow alert box\n\n**Answer Reveal:**\n‚Ä¢ Click eye icon üëÅÔ∏è\n‚Ä¢ See correct answer (green)\n‚Ä¢ Read full explanation\n‚Ä¢ No points earned/lost\n‚Ä¢ Auto-advances to next\n\n**Skip Option:**\n‚Ä¢ Click forward icon ‚è≠Ô∏è\n‚Ä¢ Move to next question\n‚Ä¢ No explanation shown\n‚Ä¢ No points earned/lost\n\n**Game Tips:**\n${game.questions} questions total\n‚Ä¢ Try to answer without hints (more points!)\n‚Ä¢ Use hints when stuck\n‚Ä¢ Read explanations to learn\n‚Ä¢ Replay to improve grade\n\n**Grading:**\nS (100%), A+ (90-99%), A (80-89%), B (70-79%), C (60-69%), D (<60%)\n\n**Issue?** Tell me what's happening! üöÄ`;
    }

    getCodingHelp(message, entities) {
        const msg = message.toLowerCase();
        
        if (msg.includes('start') || msg.includes('begin')) {
            return `üë®‚Äçüíª **Start Coding:**\n\n**Step 1: Play Our Games** üéÆ\n‚Ä¢ API Galaxy Quiz ‚Üí Learn APIs\n‚Ä¢ Debug Detective ‚Üí Fix bugs\n‚Ä¢ Syntax Speed Run ‚Üí Master syntax\n\n**Step 2: Use Our Tools** üîß\n‚Ä¢ API Explorer ‚Üí Test endpoints\n‚Ä¢ Analytics ‚Üí Track data\n\n**Step 3: Generate Code** üíª\nAsk me to generate:\n‚Ä¢ "generate API request code"\n‚Ä¢ "create validation function"\n‚Ä¢ "make Express server"\n\n**Step 4: Build Project** üöÄ\n‚Ä¢ Todo app with API\n‚Ä¢ Weather app\n‚Ä¢ Your own REST API\n\n**Resources:**\n‚Ä¢ MDN Web Docs\n‚Ä¢ JavaScript.info\n‚Ä¢ FreeCodeCamp\n‚Ä¢ Our platform (you're here!)\n\n**Try now:**\n"play API quiz" or "generate my first API code"\n\nWhat interests you? üöÄ`;
        }

        if (entities.language === 'javascript') {
            return `üìò **JavaScript Help:**\n\n**Quick Reference:**\n\n\`\`\`javascript\n// Variables\nlet name = 'John';      // Can change\nconst age = 25;         // Cannot change\n\n// Functions\nfunction greet(name) {\n    return \`Hello, \${name}!\`;\n}\n\n// Arrow function\nconst greet = (name) => \`Hello, \${name}!\`;\n\n// Async/await\nasync function fetchData() {\n    const response = await fetch(url);\n    return response.json();\n}\n\n// Arrays\nconst nums = [1, 2, 3];\nnums.map(n => n * 2);     // [2, 4, 6]\nnums.filter(n => n > 1);  // [2, 3]\n\n// Objects\nconst person = {\n    name: 'John',\n    age: 30,\n    greet() { return 'Hi!'; }\n};\n\`\`\`\n\n**Need specific help?**\n‚Ä¢ "generate code for [task]"\n‚Ä¢ "explain [concept]"\n‚Ä¢ "fix [error]"\n\nWhat do you need? üöÄ`;
        }

        return `üë®‚Äçüíª **Coding Help:**\n\nI can help with:\n‚Ä¢ JavaScript (Node, Express, React)\n‚Ä¢ Python (Flask, Django)\n‚Ä¢ APIs and HTTP\n‚Ä¢ Debugging\n‚Ä¢ Best practices\n\n**Get help:**\n‚Ä¢ "generate code for [task]"\n‚Ä¢ "explain [concept]"\n‚Ä¢ "fix [error]"\n‚Ä¢ "learn [topic]"\n\n**Try our games:**\n‚Ä¢ API Quiz ‚Üí Learn APIs\n‚Ä¢ Debug Detective ‚Üí Find bugs\n‚Ä¢ Syntax Speed Run ‚Üí Master syntax\n\nWhat do you need? üöÄ`;
    }

    getAPIHelp(message, entities) {
        if (entities.httpMethod) {
            const method = entities.httpMethod;
            const info = {
                GET: 'Retrieve data (read)',
                POST: 'Create new data (write)',
                PUT: 'Update existing data (modify)',
                DELETE: 'Remove data (delete)'
            };
            
            return `üåê **HTTP ${method}:**\n\n**Purpose:** ${info[method]}\n\n**Example:**\n\`\`\`javascript\nfetch('/api/users', {\n    method: '${method}'${method !== 'GET' ? ',\n    headers: { \'Content-Type\': \'application/json\' },\n    body: JSON.stringify({ name: \'John\' })' : ''}\n})\n.then(res => res.json())\n.then(data => console.log(data));\n\`\`\`\n\n**Try it:**\nUse our API Explorer tool!\n\n**Need full code?**\n"generate ${method} request code"\n\nWhat else? üöÄ`;
        }

        return `üåê **API Help:**\n\n**HTTP Methods:**\n‚Ä¢ GET ‚Üí Retrieve data\n‚Ä¢ POST ‚Üí Create data\n‚Ä¢ PUT ‚Üí Update data\n‚Ä¢ DELETE ‚Üí Remove data\n\n**Status Codes:**\n‚Ä¢ 200 ‚Üí OK (success)\n‚Ä¢ 201 ‚Üí Created\n‚Ä¢ 400 ‚Üí Bad Request\n‚Ä¢ 401 ‚Üí Unauthorized\n‚Ä¢ 404 ‚Üí Not Found\n‚Ä¢ 500 ‚Üí Server Error\n\n**Tools:**\n‚Ä¢ API Explorer ‚Üí Test endpoints\n‚Ä¢ API Quiz Game ‚Üí Learn concepts\n\n**Generate code:**\n"generate API request code"\n\n**Learn more:**\n"play API quiz"\n\nWhat do you need? üöÄ`;
    }

    getDebugHelp(message) {
        const msg = message.toLowerCase();
        
        if (msg.includes('cors')) {
            return `üîß **Fix CORS Error:**\n\n**Server-side (Express):**\n\`\`\`javascript\nconst cors = require('cors');\napp.use(cors());\n\`\`\`\n\n**Why it happens:**\nBrowsers block requests from different origins for security.\n\n**Solution:**\nServer must allow it with CORS headers.\n\n**Install:**\nnpm install cors\n\n**Still stuck?**\nShare your server code! üöÄ`;
        }

        if (msg.includes('404')) {
            return `üîç **Fix 404 Error:**\n\n**Common causes:**\n‚Ä¢ Wrong URL\n‚Ä¢ Route not defined\n‚Ä¢ Server not running\n‚Ä¢ Typo in path\n\n**Check:**\n1. URL spelling\n2. Server is running (node server.js)\n3. Route exists on server\n4. Port number matches\n\n**Test:**\nUse API Explorer tool!\n\n**Example:**\n\`\`\`javascript\n// Define route\napp.get('/api/users', (req, res) => {\n    res.json({ users: [] });\n});\n\`\`\`\n\nStill stuck? Share details! üöÄ`;
        }

        return `üêõ **Debug Help:**\n\n**Common errors:**\n‚Ä¢ CORS ‚Üí "help with cors"\n‚Ä¢ 404 Not Found ‚Üí "help with 404"\n‚Ä¢ Undefined values ‚Üí "fix undefined"\n‚Ä¢ Syntax errors ‚Üí Play Syntax Game!\n\n**Debug tools:**\n‚Ä¢ console.log()\n‚Ä¢ Browser DevTools (F12)\n‚Ä¢ API Explorer\n‚Ä¢ Debug Detective game\n\n**Tell me:**\n‚Ä¢ What error?\n‚Ä¢ What you're trying?\n‚Ä¢ Any error messages?\n\nI'll help you fix it! üöÄ`;
    }

    getLearningHelp(message) {
        return `üìö **Learning Path:**\n\n**Level 1: Play Games** üéÆ\n‚Ä¢ API Galaxy Quiz\n‚Ä¢ Debug Detective\n‚Ä¢ Syntax Speed Run\n‚Üí Learn by doing!\n\n**Level 2: Use Tools** üîß\n‚Ä¢ API Explorer\n‚Ä¢ Analytics Dashboard\n‚Ä¢ Pro Service demos\n‚Üí Hands-on practice!\n\n**Level 3: Generate Code** üíª\n‚Ä¢ Ask me to generate code\n‚Ä¢ Modify and experiment\n‚Ä¢ Build your own projects\n‚Üí Real experience!\n\n**Level 4: Build Projects** üöÄ\n‚Ä¢ Todo app with API\n‚Ä¢ Weather dashboard\n‚Ä¢ Your own REST API\n‚Üí Portfolio ready!\n\n**Resources:**\n‚Ä¢ MDN Web Docs\n‚Ä¢ JavaScript.info\n‚Ä¢ FreeCodeCamp\n‚Ä¢ This platform!\n\n**Start now:**\n"play api quiz" or "generate my first code"\n\nWhat interests you? üöÄ`;
    }

    getPricingInfo() {
        return `üíé **BarodaTek Services:**\n\n**FREE** (Current):\n‚úÖ All games\n‚úÖ AI chatbot\n‚úÖ Tools & demos\n‚úÖ Code generation\n‚úÖ Learning resources\n\n**PROFESSIONAL:**\nüíº Custom development\nüíº Training & consulting\nüíº Maintenance & support\nüíº Priority assistance\n\n**Contact:**\nüìß barodatek.services@gmail.com\nüí∞ CashApp: $baroda98\n\n**Popular packages:**\n‚Ä¢ Starter API: $500-1000\n‚Ä¢ Full platform: $2000-5000\n‚Ä¢ Enterprise: Custom quote\n\n**Free consultation!**\nEmail for your project. üöÄ`;
    }

    getGreeting() {
        return `Hey! üëã I'm your ultra-intelligent BarodaTek AI!\n\n**I can:**\n‚úÖ Generate working code\n‚úÖ Explain any feature/demo\n‚úÖ Help debug errors\n‚úÖ Guide your learning\n‚úÖ Answer tech questions\n\n**Try me:**\n‚Ä¢ "generate API request code"\n‚Ä¢ "show me how games work"\n‚Ä¢ "help fix CORS error"\n‚Ä¢ "play api quiz"\n\n**Smart features:**\n‚Ä¢ Context-aware responses\n‚Ä¢ Code generation from descriptions\n‚Ä¢ Demo walkthroughs\n‚Ä¢ Learning guidance\n\nWhat can I help you build? üöÄ`;
    }

    getGeneralHelp(message) {
        // üß† CHATGPT-STYLE INTELLIGENT RESPONSE SYSTEM
        // Handles ANY question with contextual understanding
        
        const msg = message.toLowerCase();
        
        // ===== GENERAL KNOWLEDGE & CONVERSATIONAL AI =====
        
        // Philosophy & Life Questions
        if (msg.match(/meaning of life|purpose|why (do )?(we|i) exist/)) {
            return `üåü **Deep Questions!**\n\nThe meaning of life is a profound question philosophers have pondered for millennia. While I'm an AI focused on helping developers, I can share some perspectives:\n\n**From a coding lens:**\n‚Ä¢ Life is like debugging - we find and fix problems\n‚Ä¢ Purpose comes from creating value for others\n‚Ä¢ Every line of code we write can help someone\n\n**Universal themes:**\n‚Ä¢ Connection with others\n‚Ä¢ Creating and building\n‚Ä¢ Learning and growing\n‚Ä¢ Making a positive impact\n\n**My purpose?** To help YOU learn, build, and succeed in your coding journey!\n\nWhat would you like to create today? üöÄ`;
        }
        
        // Weather & Current Events
        if (msg.match(/weather|temperature|forecast/)) {
            return `üå§Ô∏è **Weather Info:**\n\nI don't have real-time weather access, but I can help you BUILD a weather app!\n\n**Quick Weather App Tutorial:**\n\`\`\`javascript\n// Use OpenWeather API (free)\nconst API_KEY = 'your_key_here';\nconst city = 'Los Angeles';\n\nfetch(\`https://api.openweathermap.org/data/2.5/weather?q=\${city}&appid=\${API_KEY}\`)\n  .then(res => res.json())\n  .then(data => {\n    console.log(\`\${data.name}: \${data.main.temp}K\`);\n    console.log(\`Description: \${data.weather[0].description}\`);\n  });\n\`\`\`\n\n**Free Weather APIs:**\n‚Ä¢ OpenWeather (free tier)\n‚Ä¢ WeatherAPI.com\n‚Ä¢ National Weather Service (US only)\n\nWant me to generate a complete weather app? üå¶Ô∏è`;
        }
        
        // Math & Science Questions
        if (msg.match(/solve|calculate|what is \d+|math|equation/)) {
            return `üî¢ **Math & Calculations:**\n\nI can help with programming math problems! Share the equation and I'll write code to solve it.\n\n**Example:**\n\`\`\`javascript\n// Solve quadratic equation: ax¬≤ + bx + c = 0\nfunction solveQuadratic(a, b, c) {\n    const discriminant = b*b - 4*a*c;\n    if (discriminant < 0) return 'No real solutions';\n    \n    const x1 = (-b + Math.sqrt(discriminant)) / (2*a);\n    const x2 = (-b - Math.sqrt(discriminant)) / (2*a);\n    return { x1, x2 };\n}\n\nconsole.log(solveQuadratic(1, -3, 2)); // {x1: 2, x2: 1}\n\`\`\`\n\n**Math in JavaScript:**\n‚Ä¢ Math.sqrt() - Square root\n‚Ä¢ Math.pow(x, y) - Power\n‚Ä¢ Math.abs() - Absolute value\n‚Ä¢ Math.round/floor/ceil - Rounding\n\nWhat calculation do you need? üìê`;
        }
        
        // History & Facts
        if (msg.match(/who (is|was|invented)|when (was|did)|history of/)) {
            return `üìö **Historical Context:**\n\nWhile I'm primarily a coding AI, I can share tech history and help you research!\n\n**Tech History Highlights:**\n‚Ä¢ 1991 - World Wide Web goes public (Tim Berners-Lee)\n‚Ä¢ 1995 - JavaScript created in 10 days (Brendan Eich)\n‚Ä¢ 2004 - Facebook launched (Dorm room project!)\n‚Ä¢ 2008 - First iPhone App Store opens\n‚Ä¢ 2015 - React Native enables cross-platform apps\n\n**Research with Code:**\n\`\`\`javascript\n// Build a Wikipedia API client\nfetch('https://en.wikipedia.org/api/rest_v1/page/summary/JavaScript')\n  .then(res => res.json())\n  .then(data => console.log(data.extract));\n\`\`\`\n\nWant to build a research tool or learn about tech history? üèõÔ∏è`;
        }
        
        // Personal Advice & Recommendations
        if (msg.match(/should i|recommend|what's better|advice|suggest/)) {
            return `üí° **My Recommendation:**\n\nI analyze your question contextually! For development choices:\n\n**Learning Path:**\n‚Ä¢ New to coding? ‚Üí Start with JavaScript + our games\n‚Ä¢ Have experience? ‚Üí Jump into advanced tutorials\n‚Ä¢ Want quick results? ‚Üí Use our code generator\n\n**Tech Stack Advice:**\n‚Ä¢ Frontend: React, Vue, or vanilla JavaScript\n‚Ä¢ Backend: Node.js/Express (what we use!)\n‚Ä¢ Database: Start with JSON files, scale to MongoDB/PostgreSQL\n‚Ä¢ Hosting: Vercel (frontend), Railway (backend)\n\n**Career Advice:**\n‚Ä¢ Build projects (not just tutorials)\n‚Ä¢ Contribute to open source\n‚Ä¢ Network with developers\n‚Ä¢ Stay curious and keep learning\n\n**Specific question?**\nBe more detailed and I'll give targeted advice! üéØ`;
        }
        
        // Creative & Fun Responses
        if (msg.match(/joke|funny|make me laugh/)) {
            return `üòÑ **Developer Humor:**\n\n**Why do programmers prefer dark mode?**\nBecause light attracts bugs! ÔøΩ\n\n**Programming truths:**\n‚Ä¢ "Works on my machine" ¬Ø\\_(„ÉÑ)_/¬Ø\n‚Ä¢ 99 bugs in the code, 99 bugs... Take one down, patch it around, 127 bugs in the code!\n‚Ä¢ Debugging: Like being a detective in a crime movie where YOU are also the murderer üïµÔ∏è\n\n**Actual code comment found:**\n\`\`\`javascript\n// I am not responsible for this code.\n// They made me write it, against my will.\n\`\`\`\n\nNow let's write some bug-free code! üöÄ`;
        }
        
        // Motivational & Encouragement
        if (msg.match(/hard|difficult|can't|frustrated|stuck|give up/)) {
            return `üí™ **You've Got This!**\n\nEvery developer feels stuck sometimes - it's part of the journey!\n\n**Remember:**\n‚Ä¢ The best programmers aren't geniuses - they're persistent\n‚Ä¢ Every error teaches you something new\n‚Ä¢ "I don't know yet" is better than "I can't"\n‚Ä¢ Your first code will be messy - that's normal!\n\n**When stuck:**\n1Ô∏è‚É£ Take a break (walk, coffee, fresh air)\n2Ô∏è‚É£ Explain the problem out loud (rubber duck debugging)\n3Ô∏è‚É£ Break it into smaller problems\n4Ô∏è‚É£ Ask for help (that's what I'm here for!)\n\n**Fun fact:** The creator of this site (JBaroda) had ZERO coding experience before building this platform. If they can do it, so can you!\n\n**How can I help right now?**\n‚Ä¢ Debug your code?\n‚Ä¢ Explain a concept?\n‚Ä¢ Generate working examples?\n\nLet's solve this together! üî•`;
        }
        
        // Food, Travel, Entertainment (Fun diversions)
        if (msg.match(/food|hungry|eat|recipe|restaurant/)) {
            return `üçï **Hungry?**\n\nWhile I can't order food, I can help you BUILD a food ordering app!\n\n**Quick Food API Example:**\n\`\`\`javascript\n// Fake Restaurant API\nconst menu = [\n    { id: 1, name: 'Pizza', price: 12.99, emoji: 'üçï' },\n    { id: 2, name: 'Burger', price: 9.99, emoji: 'üçî' },\n    { id: 3, name: 'Sushi', price: 15.99, emoji: 'üç£' }\n];\n\n// Order function\nfunction placeOrder(itemId) {\n    const item = menu.find(i => i.id === itemId);\n    return \`Order placed: \${item.emoji} \${item.name} - $\${item.price}\`;\n}\n\nconsole.log(placeOrder(1)); // "Order placed: üçï Pizza - $12.99"\n\`\`\`\n\n**Coding & Coffee:**\nDevelopers run on coffee and determination! ‚òï\n\nWant to build a full food delivery app? Let's do it! üöÄ`;
        }
        
        // ===== FALLBACK: GENERAL INTELLIGENT RESPONSE =====
        // If no specific pattern matches, provide contextual help
        
        return `ü§ñ **I understand you're asking: "${message}"**\n\nWhile I'm specialized in coding and development, I can still help! Here's how:\n\n**What I excel at:**\n‚úÖ Generating code for ANY programming task\n‚úÖ Explaining technical concepts simply\n‚úÖ Debugging errors and issues\n‚úÖ Building complete applications\n‚úÖ Teaching programming from scratch\n\n**Try asking me:**\n‚Ä¢ Technical questions: "How do arrays work?"\n‚Ä¢ Code generation: "Build me a calculator app"\n‚Ä¢ Debugging: "Why isn't my code working?"\n‚Ä¢ Learning: "Teach me async/await"\n‚Ä¢ Project ideas: "What should I build?"\n\n**Or explore our platform:**\n‚Ä¢ üéÆ Play interactive coding games\n‚Ä¢ üîß Use our API Explorer tool\n‚Ä¢ üìö Browse learning tutorials\n‚Ä¢ üíª Generate custom code snippets\n\n**For non-coding questions:**\nI'll do my best to provide helpful context and guide you toward coding solutions!\n\nHow can I help you code today? üöÄ`;
    }
}

// Styling for code display
const style = document.createElement('style');
style.textContent = `
    #chat-messages { font-size: 0.95rem; }
    #chat-messages code { background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 3px; }
    #chat-messages pre { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; border-left: 4px solid var(--neon-cyan); overflow-x: auto; margin: 10px 0; }
    #chat-messages pre code { background: none; padding: 0; }
    #chat-messages strong { color: var(--gold-trim); }
    #chat-messages ul, #chat-messages ol { margin-left: 20px; margin-top: 10px; }
`;
document.head.appendChild(style);

window.chatbot = new EnhancedChatbot();
console.log('‚úÖ Ultra-Enhanced AI Chatbot Loaded with Code Generation!');
